services:
  # Aplikacja podatna (target) - sieć wewnętrzna firmy
  web:
    build:
      context: ./aplikacja_celu
      dockerfile: Dockerfile
    ports:
      - "5009:5009"
    environment:
      - PYTHONUNBUFFERED=1
    networks:
      - internal_network
  
  # Serwer atakującego - zewnętrzna sieć (internet)
  attacker:
    build:
      context: ./serwer_atakujacego
      dockerfile: Dockerfile
    ports:
      - "8888:8888"
    environment:
      - PYTHONUNBUFFERED=1
    networks:
      - external_network

networks:
  # Wewnętrzna sieć firmy (nie ma dostępu do serwera atakującego)
  internal_network:
    driver: bridge
  
  # "Internet" - zewnętrzna sieć gdzie jest serwer atakującego
  # W prawdziwym ataku to byłby serwer w internecie kontrolowany przez atakującego
  external_network:
    driver: bridge